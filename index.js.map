{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["let query = '';\n\nfunction updateQuery(newQuery) {\n    query = newQuery;\n}\n\nfunction getBaseUrl(query, page = 1, perPage = 15) {\n    const API_KEY = '47095824-8bdea46d531b71ca6f863e2d0';\n    return `https://pixabay.com/api/?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n}\n\nexport { updateQuery, getBaseUrl };\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox = null;\n\nexport function renderGallery(images, clearGallery = true) {\n    const galleryContainer = document.querySelector('.gallery-container');\n\n    if (clearGallery) {\n        galleryContainer.innerHTML = '';\n    }\n\n    const imagesToDisplay = images.slice(0, 15);\n\n    const fragment = document.createDocumentFragment();\n\n    imagesToDisplay.forEach(image => {\n        const li = document.createElement('li');\n        li.classList.add('image-item');\n\n        li.innerHTML = `\n            <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"image-view\" >\n            </a>\n            <div class=\"image-info-container\">\n                <ul class=\"image-info-list\">\n                <li class=\"image-info-item\">\n                    <h2>Likes</h2>\n                    <p>${image.likes}</p>\n                </li>\n                <li class=\"image-info-item\">\n                    <h2>Views</h2>\n                    <p>${image.views}</p>\n                </li>\n                <li class=\"image-info-item\">\n                    <h2>Comments</h2>\n                    <p>${image.comments}</p>\n                </li>\n                <li class=\"image-info-item\">\n                    <h2>Downloads</h2>\n                    <p>${image.downloads}</p>\n                </li>\n                </ul>\n            </div>\n            `;\n\n            fragment.appendChild(li);\n    });\n\n    galleryContainer.appendChild(fragment);\n\n    if (!lightbox) {\n        lightbox = new SimpleLightbox('.gallery-container a', {\n            captions: true,\n            captionsData: 'alt',\n            captionDelay: 2000,\n        });\n    } else {\n        lightbox.refresh();\n    }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { updateQuery, getBaseUrl } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\nimport axios from 'axios';\n\nconst formInput = document.querySelector('#searchInput');\nconst form = document.querySelector('.input-form');\nconst loader = document.querySelector('.loader');\nconst galleryContainer = document.querySelector('.gallery-container');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nlet page = 1;\nconst perPage = 15;\nlet currentQuery = '';\n\nasync function fetchImages(query, pageNumber = 1) {\n    loader.style.display = 'block';\n\n    try {\n        const url = getBaseUrl(query, pageNumber, perPage);\n        const { data } = await axios.get(url);\n\n        if (data.hits.length === 0 && pageNumber === 1) {\n            galleryContainer.innerHTML = '';\n            iziToast.show({\n                message:'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n                backgroundColor: '#FF6347',\n                messageColor: '#fafafb',\n            });\n            loadMoreBtn.style.display = 'none';\n        } else {\n            renderGallery(data.hits, pageNumber === 1);\n\n            if (pageNumber > 1) {\n                const imageItems = document.querySelectorAll('.image-item');\n                if (imageItems.length > 0) {\n                    const imageHeight = imageItems[0].getBoundingClientRect().height;\n                    window.scrollBy({\n                        top: 2 * imageHeight,\n                        behavior: 'smooth',\n                    });\n                }\n            }\n\n            if (data.hits.length + pageNumber * perPage >= data.totalHits) {\n                loadMoreBtn.style.display = 'none';\n                iziToast.show({\n                    message:\"We're sorry, but you've reached the end of search results.\",\n                    position: 'topRight',\n                    backgroundColor: '#BDC3C7',\n                    messageColor: '#00000',\n                });\n            } else {\n                loadMoreBtn.style.display = 'block';\n            }\n        }\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        iziToast.show({\n            message:'An error occurred while fetching images. Please try again later.',\n            position: 'topRight',\n            backgroundColor: '#ef4040',\n            messageColor: '#fafafb',\n        });\n    } finally {\n        loader.style.display = 'none';\n    }\n}\n\nfunction checkInput(event) {\n    event.preventDefault();\n\n    const inputContent = formInput.value.trim();\n\n    if (!inputContent) {\n        galleryContainer.innerHTML = '';\n        iziToast.show({\n            message: 'Field cannot be empty',\n            position: 'topRight',\n            backgroundColor: '#FF8C00',\n            messageColor: '#fafafb',\n        });\n        loadMoreBtn.style.display = 'none';\n        return false;\n    }\n\n    currentQuery = inputContent;\n    page = 1;\n    updateQuery(currentQuery);\n    galleryContainer.innerHTML = '';\n    loadMoreBtn.style.display = 'none';\n    fetchImages(currentQuery, page);\n    return true;\n}\n\nfunction loadMoreImages() {\n    page += 1;\n    fetchImages(currentQuery, page);\n}\n\nform.addEventListener('submit', checkInput);\nloadMoreBtn.addEventListener('click', loadMoreImages);\n"],"names":["getBaseUrl","query","page","perPage","lightbox","renderGallery","images","clearGallery","galleryContainer","imagesToDisplay","fragment","image","li","SimpleLightbox","formInput","form","loader","loadMoreBtn","currentQuery","fetchImages","pageNumber","url","data","axios","iziToast","imageItems","imageHeight","error","checkInput","event","inputContent","loadMoreImages"],"mappings":"owBAMA,SAASA,EAAWC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAE/C,MAAO,qEAA6C,mBAAmBF,CAAK,CAAC,iEAAiEC,CAAI,aAAaC,CAAO,EAC1K,CCNA,IAAIC,EAAW,KAER,SAASC,EAAcC,EAAQC,EAAe,GAAM,CACvD,MAAMC,EAAmB,SAAS,cAAc,oBAAoB,EAEhED,IACAC,EAAiB,UAAY,IAGjC,MAAMC,EAAkBH,EAAO,MAAM,EAAG,EAAE,EAEpCI,EAAW,SAAS,yBAE1BD,EAAgB,QAAQE,GAAS,CAC7B,MAAMC,EAAK,SAAS,cAAc,IAAI,EACtCA,EAAG,UAAU,IAAI,YAAY,EAE7BA,EAAG,UAAY;AAAA,uBACAD,EAAM,aAAa;AAAA,4BACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAMzCA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,yBAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,yBAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,yBAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,cAM5BD,EAAS,YAAYE,CAAE,CACnC,CAAK,EAEDJ,EAAiB,YAAYE,CAAQ,EAEhCN,EAODA,EAAS,QAAO,EANhBA,EAAW,IAAIS,EAAe,uBAAwB,CAClD,SAAU,GACV,aAAc,MACd,aAAc,GAC1B,CAAS,CAIT,CCtDA,MAAMC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCR,EAAmB,SAAS,cAAc,oBAAoB,EAC9DS,EAAc,SAAS,cAAc,gBAAgB,EAE3D,IAAIf,EAAO,EACX,MAAMC,EAAU,GAChB,IAAIe,EAAe,GAEnB,eAAeC,EAAYlB,EAAOmB,EAAa,EAAG,CAC9CJ,EAAO,MAAM,QAAU,QAEvB,GAAI,CACA,MAAMK,EAAMrB,EAAWC,EAAOmB,EAAYjB,CAAO,EAC3C,CAAE,KAAAmB,CAAI,EAAK,MAAMC,EAAM,IAAIF,CAAG,EAEpC,GAAIC,EAAK,KAAK,SAAW,GAAKF,IAAe,EACzCZ,EAAiB,UAAY,GAC7BgB,EAAS,KAAK,CACV,QAAQ,2EACR,SAAU,WACV,gBAAiB,UACjB,aAAc,SAC9B,CAAa,EACDP,EAAY,MAAM,QAAU,WACzB,CAGH,GAFAZ,EAAciB,EAAK,KAAMF,IAAe,CAAC,EAErCA,EAAa,EAAG,CAChB,MAAMK,EAAa,SAAS,iBAAiB,aAAa,EAC1D,GAAIA,EAAW,OAAS,EAAG,CACvB,MAAMC,EAAcD,EAAW,CAAC,EAAE,sBAAqB,EAAG,OAC1D,OAAO,SAAS,CACZ,IAAK,EAAIC,EACT,SAAU,QAClC,CAAqB,CACJ,CACJ,CAEGJ,EAAK,KAAK,OAASF,EAAajB,GAAWmB,EAAK,WAChDL,EAAY,MAAM,QAAU,OAC5BO,EAAS,KAAK,CACV,QAAQ,6DACR,SAAU,WACV,gBAAiB,UACjB,aAAc,QAClC,CAAiB,GAEDP,EAAY,MAAM,QAAU,OAEnC,CACJ,OAAQU,EAAO,CACZ,QAAQ,MAAM,yBAA0BA,CAAK,EAC7CH,EAAS,KAAK,CACV,QAAQ,mEACR,SAAU,WACV,gBAAiB,UACjB,aAAc,SAC1B,CAAS,CACT,QAAc,CACNR,EAAO,MAAM,QAAU,MAC1B,CACL,CAEA,SAASY,EAAWC,EAAO,CACvBA,EAAM,eAAc,EAEpB,MAAMC,EAAehB,EAAU,MAAM,KAAI,EAEzC,OAAKgB,GAYLZ,EAAeY,EACf5B,EAAO,EAEPM,EAAiB,UAAY,GAC7BS,EAAY,MAAM,QAAU,OAC5BE,EAAYD,EAAchB,CAAI,EACvB,KAjBHM,EAAiB,UAAY,GAC7BgB,EAAS,KAAK,CACV,QAAS,wBACT,SAAU,WACV,gBAAiB,UACjB,aAAc,SAC1B,CAAS,EACDP,EAAY,MAAM,QAAU,OACrB,GAUf,CAEA,SAASc,GAAiB,CACtB7B,GAAQ,EACRiB,EAAYD,EAAchB,CAAI,CAClC,CAEAa,EAAK,iBAAiB,SAAUa,CAAU,EAC1CX,EAAY,iBAAiB,QAASc,CAAc"}